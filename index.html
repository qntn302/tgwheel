<!DOCTYPE html>
<html>
<head>
    <title>301secrets Wheel</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d1b69 100%);
            color: white;
            text-align: center;
            padding: 20px;
            font-family: 'Segoe UI', Arial, sans-serif;
            min-height: 100vh;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        .container {
            max-width: 500px;
            width: 100%;
            padding: 20px;
        }
        
        /* –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —è–∑—ã–∫–∞ */
        .language-switcher {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            z-index: 100;
        }
        .lang-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 8px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s;
            min-width: 60px;
        }
        .lang-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        .lang-btn.active {
            background: #ff7f00;
            border-color: #ff7f00;
        }
        
        h1 {
            color: #ff7f00;
            margin-bottom: 10px;
            font-size: 28px;
            margin-top: 40px;
        }
        .subtitle {
            color: #aaa;
            margin-bottom: 30px;
            font-size: 16px;
        }
        
        /* –ö–æ–ª–µ—Å–æ */
        .wheel-container {
            position: relative;
            width: 320px;
            height: 320px;
            margin: 0 auto 40px;
        }
        .wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: conic-gradient(
                from 0deg,
                #ff7f00 0deg 36deg,          /* Nothing (40%) - –æ—Ä–∞–Ω–∂–µ–≤—ã–π */
                #3498db 36deg 54deg,         /* Mini breakdown (15%) - —Å–∏–Ω–∏–π */
                #2ecc71 54deg 72deg,         /* Loops/MIDI (15%) - –∑–µ–ª–µ–Ω—ã–π */
                #9b59b6 72deg 84deg,         /* Sound pack (10%) - —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π */
                #e74c3c 84deg 90deg,         /* Old drop (5%) - –∫—Ä–∞—Å–Ω—ã–π */
                #f1c40f 90deg 104.4deg,      /* 10% discount (7%) - –∂–µ–ª—Ç—ã–π */
                #1abc9c 104.4deg 115.2deg,   /* 15% discount (4%) - –±–∏—Ä—é–∑–æ–≤—ã–π */
                #e67e22 115.2deg 118.8deg,   /* 20% discount (1.5%) - –æ—Ä–∞–Ω–∂–µ–≤—ã–π2 */
                #34495e 118.8deg 122.4deg,   /* 7 days access (1%) - —Ç–µ–º–Ω–æ-—Å–µ—Ä—ã–π */
                #d35400 122.4deg 123.6deg,   /* 30 days access (0.5%) - –∫–æ—Ä–∏—á–Ω–µ–≤—ã–π */
                #1a1a1a 123.6deg 360deg      /* –ü—É—Å—Ç–æ–µ –º–µ—Å—Ç–æ */
            );
            transition: transform 5.5s cubic-bezier(0.2, 0.8, 0.3, 0.99);
            position: relative;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            border: 8px solid #2d1b69;
        }
        .pointer {
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            width: 35px;
            height: 50px;
            background: #ff7f00;
            clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
            z-index: 10;
            filter: drop-shadow(0 3px 5px rgba(0,0,0,0.5));
        }
        
        /* –ö–Ω–æ–ø–∫–∞ —Å–ø–∏–Ω–∞ */
        .spin-btn {
            background: linear-gradient(135deg, #ff7f00 0%, #ff5500 100%);
            color: white;
            border: none;
            padding: 18px 50px;
            font-size: 22px;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            margin: 25px 0;
            box-shadow: 0 8px 20px rgba(255, 127, 0, 0.4);
            transition: all 0.3s;
            letter-spacing: 1px;
        }
        .spin-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 25px rgba(255, 127, 0, 0.6);
        }
        .spin-btn:disabled {
            background: #555;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        /* –†–µ–∑—É–ª—å—Ç–∞—Ç */
        .result {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            border-left: 5px solid #ff7f00;
            display: none;
            backdrop-filter: blur(10px);
        }
        .prize-name {
            font-size: 24px;
            color: #ff7f00;
            margin: 15px 0;
            font-weight: bold;
        }
        .prize-desc {
            color: #ccc;
            font-size: 15px;
            margin: 15px 0 25px;
            line-height: 1.5;
        }
        .claim-btn {
            background: #2ecc71;
            color: white;
            border: none;
            padding: 14px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            font-size: 16px;
            display: none;
            transition: all 0.3s;
        }
        .claim-btn:hover {
            background: #27ae60;
            transform: translateY(-2px);
        }
        
        /* –ë–ª–æ–∫ —Å –ø—Ä–∏–∑–∞–º–∏ */
        .prizes-info {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            padding: 20px;
            margin: 25px 0;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .prizes-title {
            color: #ff7f00;
            font-size: 18px;
            margin-bottom: 15px;
            font-weight: bold;
        }
        .prizes-list {
            text-align: left;
            color: #ddd;
            font-size: 14px;
            line-height: 1.8;
            padding-left: 10px;
        }
        .prizes-list li {
            margin-bottom: 8px;
        }
        .prizes-note {
            color: #aaa;
            font-size: 13px;
            margin-top: 15px;
            font-style: italic;
        }
        
        /* –ü—Ä–∞–≤–∏–ª–∞ */
        .rules {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            padding: 20px;
            margin-top: 25px;
            font-size: 14px;
            color: #aaa;
            text-align: left;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .cooldown-info {
            color: #ff7f00;
            font-size: 13px;
            margin-top: 8px;
            display: none;
            font-weight: bold;
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        @keyframes glow {
            0%, 100% { box-shadow: 0 0 20px rgba(255, 127, 0, 0.5); }
            50% { box-shadow: 0 0 30px rgba(255, 127, 0, 0.8); }
        }
        .spin-btn:not(:disabled) {
            animation: glow 2s infinite;
        }
    </style>
</head>
<body>
    <div class="language-switcher">
        <button class="lang-btn active" onclick="setLanguage('ru')">RU</button>
        <button class="lang-btn" onclick="setLanguage('en')">EN</button>
    </div>
    
    <div class="container">
        <h1 id="title">üé° –ö–æ–ª–µ—Å–æ —Ñ–æ—Ä—Ç—É–Ω—ã 301secrets</h1>
        <p class="subtitle" id="subtitle">–ö—Ä—É—Ç–∏ –∫–æ–ª–µ—Å–æ –∏ –∑–∞–±–µ—Ä–∏ —Å–≤–æ–π –ø—Ä–∏–∑!</p>
        
        <div class="wheel-container">
            <div class="pointer"></div>
            <div class="wheel" id="wheel"></div>
        </div>
        
        <button class="spin-btn" id="spinBtn" onclick="checkSpinAvailability()">üéØ –ö–†–£–¢–ò–¢–¨ –ö–û–õ–ï–°–û</button>
        <div class="cooldown-info" id="cooldownInfo"></div>
        
        <div class="result" id="result">
            <div id="resultTitle">üéâ –¢–≤–æ–π –≤—ã–∏–≥—Ä—ã—à:</div>
            <div class="prize-name" id="prizeName"></div>
            <div class="prize-desc" id="prizeDesc"></div>
            <button class="claim-btn" id="claimBtn" onclick="claimPrize()">ü™á –ó–ê–ë–†–ê–¢–¨ –ü–†–ò–ó</button>
        </div>
        
        <!-- –ù–û–í–´–ô –ë–õ–û–ö: –ß—Ç–æ –º–æ–∂–Ω–æ –≤—ã–∏–≥—Ä–∞—Ç—å -->
        <div class="prizes-info" id="prizesInfo">
            <div class="prizes-title" id="prizesTitle">–ß—Ç–æ –º–æ–∂–Ω–æ –≤—ã–∏–≥—Ä–∞—Ç—å?</div>
            <div class="prizes-list" id="prizesList">
                <div>‚Ä¢ –ú–æ–∏ —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–µ –ª—É–ø—ã, MIDI, FLP</div>
                <div>‚Ä¢ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –∏–∑ 301secrets</div>
                <div>‚Ä¢ –°–∫–∏–¥–∫–∏ –Ω–∞ –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø</div>
                <div>‚Ä¢ –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ 7 / 30 –¥–Ω–µ–π –¥–æ—Å—Ç—É–ø–∞ –≤ 301secrets</div>
            </div>
            <div class="prizes-note" id="prizesNote">
                –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –Ω–∞–≥—Ä–∞–¥—ã —Ä–µ–¥–∫–∏–µ ‚Ä¢ –ï—Å—Ç—å –ø—É—Å—Ç—ã–µ —Å–ª–æ—Ç—ã ‚Ä¢ –ü–æ–≤—Ç–æ—Ä–Ω—ã–π —Å–ø–∏–Ω —á–µ—Ä–µ–∑ 24 —á–∞—Å–∞
            </div>
        </div>
        
        <div class="rules" id="rules">
            <strong>üìú –ü—Ä–∞–≤–∏–ª–∞:</strong><br>
            1. –û–¥–Ω–∞ –ø–æ–ø—ã—Ç–∫–∞ –≤ 24 —á–∞—Å–∞<br>
            2. –°–∫–∏–¥–∫–∏ –¥–µ–π—Å—Ç–≤—É—é—Ç 48 —á–∞—Å–æ–≤<br>
            3. –î–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–≤–∞—Ç—É ‚Äî –æ–¥–Ω–æ—Ä–∞–∑–æ–≤–æ<br>
            4. –§–∞–π–ª—ã –ø—Ä–∏—Ö–æ–¥—è—Ç –≤ –ª–∏—á–∫—É –æ—Ç –±–æ—Ç–∞
        </div>
    </div>
    
    <script>
        // ==================== –ù–û–í–ê–Ø –°–¢–†–£–ö–¢–£–†–ê –ü–†–ò–ó–û–í ====================
        const prizes = [
            // üîπ A. –ù–µ–π—Ç—Ä–∞–ª—å–Ω—ã–µ / –ø—É—Å—Ç—ã–µ (40%)
            { 
                name: "Nothing this time", 
                name_ru: "–ü–æ–∫–∞ –Ω–µ —Å–µ–≥–æ–¥–Ω—è",
                desc: "Try again tomorrow", 
                desc_ru: "–ü–æ–ø—Ä–æ–±—É–π –∑–∞–≤—Ç—Ä–∞",
                type: "empty", 
                value: null, 
                weight: 40 
            },
            
            // üîπ B. –ö–æ–Ω—Ç–µ–Ω—Ç (45%)
            { 
                name: "Mini breakdown (exclusive)", 
                name_ru: "–ú–∏–Ω–∏-—Ä–∞–∑–±–æ—Ä (—ç–∫—Å–∫–ª—é–∑–∏–≤)",
                desc: "Detailed breakdown of a recent track", 
                desc_ru: "–î–µ—Ç–∞–ª—å–Ω—ã–π —Ä–∞–∑–±–æ—Ä —Å–≤–µ–∂–µ–≥–æ —Ç—Ä–µ–∫–∞",
                type: "content", 
                value: "mini_breakdown", 
                weight: 15 
            },
            { 
                name: "Loops / MIDI from private stash", 
                name_ru: "–õ—É–ø—ã / MIDI –∏–∑ –ø—Ä–∏–≤–∞—Ç–∫–∏",
                desc: "3 exclusive loops or MIDI files", 
                desc_ru: "3 —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã—Ö –ª—É–ø–∞ –∏–ª–∏ MIDI-—Ñ–∞–π–ª–∞",
                type: "content", 
                value: "loops_midi", 
                weight: 15 
            },
            { 
                name: "Small sound pack", 
                name_ru: "–ù–µ–±–æ–ª—å—à–æ–π –∑–≤—É–∫–æ–≤–æ–π –ø–∞–∫",
                desc: "10 unique sounds for your productions", 
                desc_ru: "10 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∑–≤—É–∫–æ–≤ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞",
                type: "content", 
                value: "sound_pack", 
                weight: 10 
            },
            { 
                name: "Old private drop (limited)", 
                name_ru: "–°—Ç–∞—Ä—ã–π –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –¥—Ä–æ–ø (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ)",
                desc: "Archived content from previous months", 
                desc_ru: "–ê—Ä—Ö–∏–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç —Å –ø—Ä–æ—à–ª—ã—Ö –º–µ—Å—è—Ü–µ–≤",
                type: "content", 
                value: "old_drop", 
                weight: 5 
            },
            
            // üîπ C. –°–∫–∏–¥–∫–∏ (12.5%)
            { 
                name: "10% discount on full access", 
                name_ru: "–°–∫–∏–¥–∫–∞ 10% –Ω–∞ –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø",
                desc: "Valid for 48 hours. One-time use.", 
                desc_ru: "–î–µ–π—Å—Ç–≤—É–µ—Ç 48 —á–∞—Å–æ–≤. –û–¥–Ω–æ—Ä–∞–∑–æ–≤–æ.",
                type: "discount", 
                value: "10", 
                weight: 7 
            },
            { 
                name: "15% discount on full access", 
                name_ru: "–°–∫–∏–¥–∫–∞ 15% –Ω–∞ –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø",
                desc: "Valid for 48 hours. One-time use.", 
                desc_ru: "–î–µ–π—Å—Ç–≤—É–µ—Ç 48 —á–∞—Å–æ–≤. –û–¥–Ω–æ—Ä–∞–∑–æ–≤–æ.",
                type: "discount", 
                value: "15", 
                weight: 4 
            },
            { 
                name: "20% discount on full access", 
                name_ru: "–°–∫–∏–¥–∫–∞ 20% –Ω–∞ –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø",
                desc: "Valid for 48 hours. One-time use.", 
                desc_ru: "–î–µ–π—Å—Ç–≤—É–µ—Ç 48 —á–∞—Å–æ–≤. –û–¥–Ω–æ—Ä–∞–∑–æ–≤–æ.",
                type: "discount", 
                value: "20", 
                weight: 1.5 
            },
            
            // üîπ D. –î–æ—Å—Ç—É–ø (1.5%)
            { 
                name: "7 days full access", 
                name_ru: "7 –¥–Ω–µ–π –ø–æ–ª–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞",
                desc: "One week in the private group", 
                desc_ru: "–ù–µ–¥–µ–ª—è –≤ –ø—Ä–∏–≤–∞—Ç–Ω–æ–π –≥—Ä—É–ø–ø–µ",
                type: "access", 
                value: "7_days", 
                weight: 1 
            },
            { 
                name: "1 month full access", 
                name_ru: "1 –º–µ—Å—è—Ü –ø–æ–ª–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞",
                desc: "Legendary prize! Full month access", 
                desc_ru: "–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π –ø—Ä–∏–∑! –ú–µ—Å—è—Ü –¥–æ—Å—Ç—É–ø–∞",
                type: "access", 
                value: "30_days", 
                weight: 0.5 
            }
        ];
        
        // ==================== –ü–ï–†–ï–ú–ï–ù–ù–´–ï ====================
        let currentLang = 'ru';
        let isSpinning = false;
        let currentPrize = null;
        let lastSpinTime = null;
        
        // ==================== –ü–ï–†–ï–í–û–î–´ ====================
        const translations = {
            ru: {
                title: "üé° –ö–æ–ª–µ—Å–æ —Ñ–æ—Ä—Ç—É–Ω—ã 301secrets",
                subtitle: "–ö—Ä—É—Ç–∏ –∫–æ–ª–µ—Å–æ –∏ –∑–∞–±–µ—Ä–∏ —Å–≤–æ–π –ø—Ä–∏–∑!",
                spinBtn: "üéØ –ö–†–£–¢–ò–¢–¨ –ö–û–õ–ï–°–û",
                resultTitle: "üéâ –¢–≤–æ–π –≤—ã–∏–≥—Ä—ã—à:",
                claimBtn: "ü™á –ó–ê–ë–†–ê–¢–¨ –ü–†–ò–ó",
                sending: "‚åõ –û—Ç–ø—Ä–∞–≤–ª—è–µ–º...",
                sent: "‚úÖ –ü—Ä–∏–∑ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!",
                recorded: "‚úÖ –ü—Ä–∏–∑ –∑–∞–ø–∏—Å–∞–Ω!",
                cooldown: "–ü–æ–¥–æ–∂–¥–∏ –µ—â—ë {hours} —á–∞—Å–æ–≤",
                prizesTitle: "–ß—Ç–æ –º–æ–∂–Ω–æ –≤—ã–∏–≥—Ä–∞—Ç—å?",
                prizesList: [
                    "‚Ä¢ –ú–æ–∏ —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–µ –ª—É–ø—ã, MIDI, FLP",
                    "‚Ä¢ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –∏–∑ 301secrets",
                    "‚Ä¢ –°–∫–∏–¥–∫–∏ –Ω–∞ –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø",
                    "‚Ä¢ –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ 7 / 30 –¥–Ω–µ–π –¥–æ—Å—Ç—É–ø–∞ –≤ 301secrets"
                ],
                prizesNote: "–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –Ω–∞–≥—Ä–∞–¥—ã —Ä–µ–¥–∫–∏–µ ‚Ä¢ –ï—Å—Ç—å –ø—É—Å—Ç—ã–µ —Å–ª–æ—Ç—ã ‚Ä¢ –ü–æ–≤—Ç–æ—Ä–Ω—ã–π —Å–ø–∏–Ω —á–µ—Ä–µ–∑ 24 —á–∞—Å–∞",
                rulesTitle: "üìú –ü—Ä–∞–≤–∏–ª–∞:",
                rules: [
                    "1. –û–¥–Ω–∞ –ø–æ–ø—ã—Ç–∫–∞ –≤ 24 —á–∞—Å–∞",
                    "2. –°–∫–∏–¥–∫–∏ –¥–µ–π—Å—Ç–≤—É—é—Ç 48 —á–∞—Å–æ–≤",
                    "3. –î–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–≤–∞—Ç—É ‚Äî –æ–¥–Ω–æ—Ä–∞–∑–æ–≤–æ",
                    "4. –§–∞–π–ª—ã –ø—Ä–∏—Ö–æ–¥—è—Ç –≤ –ª–∏—á–∫—É –æ—Ç –±–æ—Ç–∞"
                ],
                finalNote: "–£–¥–∞—á–∏! üçÄ"
            },
            en: {
                title: "üé° 301secrets Fortune Wheel",
                subtitle: "Spin the wheel and claim your prize!",
                spinBtn: "üéØ SPIN THE WHEEL",
                resultTitle: "üéâ Your prize:",
                claimBtn: "ü™á CLAIM PRIZE",
                sending: "‚åõ Sending...",
                sent: "‚úÖ Prize sent!",
                recorded: "‚úÖ Prize recorded!",
                cooldown: "Wait {hours} more hours",
                prizesTitle: "What you can unlock?",
                prizesList: [
                    "‚Ä¢ My exclusive loops, midi, flps",
                    "‚Ä¢ Limited content from 301secrets",
                    "‚Ä¢ Discounts on full access",
                    "‚Ä¢ Free 7 / 30 days of full access to 301secrets"
                ],
                prizesNote: "Some rewards are rare ‚Ä¢ There are also empty slots ‚Ä¢ You can spin again in 24 hours",
                rulesTitle: "üìú Rules:",
                rules: [
                    "1. One try every 24 hours",
                    "2. Discounts valid for 48 hours",
                    "3. Private access is one-time",
                    "4. Files arrive via bot DM"
                ],
                finalNote: "Let's see what you get üçÄ"
            }
        };
        
        // ==================== –§–£–ù–ö–¶–ò–ò –Ø–ó–´–ö–ê ====================
        function setLanguage(lang) {
            currentLang = lang;
            updateTexts();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—É—é –∫–Ω–æ–ø–∫—É
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.textContent === lang.toUpperCase()) {
                    btn.classList.add('active');
                }
            });
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage
            localStorage.setItem('wheel_lang', lang);
        }
        
        function updateTexts() {
            const t = translations[currentLang];
            
            // –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ–∫—Å—Ç—ã
            document.getElementById('title').textContent = t.title;
            document.getElementById('subtitle').textContent = t.subtitle;
            document.getElementById('spinBtn').textContent = t.spinBtn;
            document.getElementById('resultTitle').textContent = t.resultTitle;
            document.getElementById('claimBtn').textContent = t.claimBtn;
            
            // –ë–ª–æ–∫ —Å –ø—Ä–∏–∑–∞–º–∏
            document.getElementById('prizesTitle').textContent = t.prizesTitle;
            const prizesList = document.getElementById('prizesList');
            prizesList.innerHTML = t.prizesList.map(item => `<div>${item}</div>`).join('');
            document.getElementById('prizesNote').textContent = t.prizesNote;
            
            // –ü—Ä–∞–≤–∏–ª–∞
            const rulesElement = document.getElementById('rules');
            rulesElement.innerHTML = `<strong>${t.rulesTitle}</strong><br>${t.rules.join('<br>')}`;
            
            // –ï—Å–ª–∏ –µ—Å—Ç—å —Ç–µ–∫—É—â–∏–π –ø—Ä–∏–∑, –æ–±–Ω–æ–≤–ª—è–µ–º –µ–≥–æ —Ç–µ–∫—Å—Ç
            if (currentPrize) {
                document.getElementById('prizeName').textContent = 
                    currentLang === 'ru' ? currentPrize.name_ru : currentPrize.name;
                document.getElementById('prizeDesc').textContent = 
                    currentLang === 'ru' ? currentPrize.desc_ru : currentPrize.desc;
            }
        }
        
        // ==================== –§–£–ù–ö–¶–ò–ò –ö–û–õ–ï–°–ê ====================
        function checkSpinAvailability() {
            if (isSpinning) return;
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫—É–ª–¥–∞—É–Ω (24 —á–∞—Å–∞)
            if (lastSpinTime) {
                const hoursPassed = (Date.now() - lastSpinTime) / (1000 * 60 * 60);
                if (hoursPassed < 24) {
                    const hoursLeft = Math.ceil(24 - hoursPassed);
                    const t = translations[currentLang];
                    document.getElementById('cooldownInfo').textContent = 
                        t.cooldown.replace('{hours}', hoursLeft);
                    document.getElementById('cooldownInfo').style.display = 'block';
                    return;
                }
            }
            
            document.getElementById('cooldownInfo').style.display = 'none';
            spinWheel();
        }
        
        function spinWheel() {
            if (isSpinning) return;
            isSpinning = true;
            
            const spinBtn = document.getElementById("spinBtn");
            const wheel = document.getElementById("wheel");
            
            spinBtn.disabled = true;
            document.getElementById("result").style.display = "none";
            document.getElementById("claimBtn").style.display = "none";
            
            // –í—ã–±–∏—Ä–∞–µ–º –ø—Ä–∏–∑ –ø–æ –≤–µ—Å–∞–º (—à–∞–Ω—Å—ã –æ—Å—Ç–∞—é—Ç—Å—è —Ç–µ –∂–µ)
            const random = Math.random() * 100;
            let currentWeight = 0;
            for (const prize of prizes) {
                currentWeight += prize.weight;
                if (random <= currentWeight) {
                    currentPrize = prize;
                    break;
                }
            }
            
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–æ–∑–∏—Ü–∏—é –ø—Ä–∏–∑–∞ –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏
            const prizeIndex = prizes.indexOf(currentPrize);
            const segmentAngle = 360 / prizes.length;
            
            // –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è —Å –∑–∞–º–µ–¥–ª–µ–Ω–∏–µ–º
            // 1. –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
            // 2. 3 –ø–æ–ª–Ω—ã—Ö –æ–±–æ—Ä–æ—Ç–∞ (1080 –≥—Ä–∞–¥—É—Å–æ–≤)
            // 3. + –ø–æ–∑–∏—Ü–∏—è –ø—Ä–∏–∑–∞
            // 4. + —Å–ª—É—á–∞–π–Ω–æ–µ —Å–º–µ—â–µ–Ω–∏–µ –≤–Ω—É—Ç—Ä–∏ —Å–µ–≥–º–µ–Ω—Ç–∞
            const baseRotation = 1080; // 3 –ø–æ–ª–Ω—ã—Ö –æ–±–æ—Ä–æ—Ç–∞
            const targetAngle = baseRotation + (prizeIndex * segmentAngle) + (Math.random() * segmentAngle * 0.7);
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—é –¥–ª—è –ø–ª–∞–≤–Ω–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞
            wheel.style.transition = 'transform 0.1s ease-out';
            wheel.style.transform = 'rotate(0deg)';
            
            // –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ –æ—Å–Ω–æ–≤–Ω–æ–π –∞–Ω–∏–º–∞—Ü–∏–µ–π
            setTimeout(() => {
                // –û—Å–Ω–æ–≤–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è —Å –ø–ª–∞–≤–Ω—ã–º –∑–∞–º–µ–¥–ª–µ–Ω–∏–µ–º
                wheel.style.transition = 'transform 5.5s cubic-bezier(0.2, 0.8, 0.3, 0.99)';
                wheel.style.transform = `rotate(${targetAngle}deg)`;
                
                // –î–æ–±–∞–≤–ª—è–µ–º —ç—Ñ—Ñ–µ–∫—Ç "–¥—Ä–æ–∂–∞–Ω–∏—è" –≤ –∫–æ–Ω—Ü–µ
                setTimeout(() => {
                    wheel.style.transition = 'transform 0.3s ease-out';
                    const currentRot = targetAngle % 360;
                    wheel.style.transform = `rotate(${targetAngle + 2}deg)`;
                    
                    setTimeout(() => {
                        wheel.style.transform = `rotate(${targetAngle - 1}deg)`;
                        
                        setTimeout(() => {
                            wheel.style.transform = `rotate(${targetAngle}deg)`;
                        }, 100);
                    }, 150);
                }, 5300);
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—Ä–µ–º—è —Å–ø–∏–Ω–∞
                lastSpinTime = Date.now();
                localStorage.setItem('last_spin_time', lastSpinTime);
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏
                setTimeout(() => {
                    showPrize();
                    isSpinning = false;
                    spinBtn.disabled = false;
                }, 5800);
                
            }, 50);
        }
        
        function showPrize() {
            const prizeName = document.getElementById("prizeName");
            const prizeDesc = document.getElementById("prizeDesc");
            const resultDiv = document.getElementById("result");
            const claimBtn = document.getElementById("claimBtn");
            
            prizeName.textContent = currentLang === 'ru' ? currentPrize.name_ru : currentPrize.name;
            prizeDesc.textContent = currentLang === 'ru' ? currentPrize.desc_ru : currentPrize.desc;
            
            resultDiv.style.display = "block";
            claimBtn.style.display = "block";
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è
            resultDiv.style.opacity = "0";
            resultDiv.style.transform = "translateY(20px) scale(0.95)";
            setTimeout(() => {
                resultDiv.style.transition = "all 0.6s cubic-bezier(0.2, 0.8, 0.3, 1)";
                resultDiv.style.opacity = "1";
                resultDiv.style.transform = "translateY(0) scale(1)";
            }, 10);
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –∫–Ω–æ–ø–∫–∏
            setTimeout(() => {
                claimBtn.style.opacity = "0";
                claimBtn.style.transform = "translateY(10px)";
                setTimeout(() => {
                    claimBtn.style.transition = "all 0.5s ease-out";
                    claimBtn.style.opacity = "1";
                    claimBtn.style.transform = "translateY(0)";
                }, 10);
            }, 200);
        }
        
        function claimPrize() {
            if (!currentPrize) return;
            
            const claimBtn = document.getElementById("claimBtn");
            const t = translations[currentLang];
            
            claimBtn.textContent = t.sending;
            claimBtn.disabled = true;
            
            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ Telegram –±–æ—Ç–∞
            if (typeof Telegram !== 'undefined' && Telegram.WebApp) {
                const user = Telegram.WebApp.initDataUnsafe.user;
                Telegram.WebApp.sendData(JSON.stringify({
                    action: "wheel_prize",
                    prize: currentPrize,
                    user_id: user?.id,
                    username: user?.username,
                    language: currentLang,
                    time: new Date().toISOString()
                }));
                
                // –ó–∞–∫—Ä—ã–≤–∞–µ–º —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã
                setTimeout(() => { 
                    Telegram.WebApp.close(); 
                }, 2000);
                
                claimBtn.textContent = t.sent;
            } else {
                // –î–ª—è —Ç–µ—Å—Ç–∞ –±–µ–∑ Telegram
                claimBtn.textContent = t.recorded;
                console.log("–í—ã–∏–≥—Ä–∞–Ω–Ω—ã–π –ø—Ä–∏–∑:", {
                    prize: currentPrize,
                    language: currentLang,
                    time: new Date().toISOString()
                });
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Å–ø–ª—ã–≤–∞—é—â–µ–µ –æ–∫–Ω–æ —Å –ø—Ä–∏–∑–æ–º
                setTimeout(() => {
                    alert(`${t.resultTitle}\n\n${currentLang === 'ru' ? currentPrize.name_ru : currentPrize.name}\n\n${currentLang === 'ru' ? currentPrize.desc_ru : currentPrize.desc}`);
                }, 500);
            }
        }
        
        // ==================== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ====================
        document.addEventListener('DOMContentLoaded', function() {
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º Telegram WebApp
            if (typeof Telegram !== 'undefined' && Telegram.WebApp) {
                Telegram.WebApp.ready();
                Telegram.WebApp.expand();
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–µ–º—É
                if (Telegram.WebApp.colorScheme === 'dark') {
                    document.body.style.background = '#1a1a1a';
                }
                
                // –ü–æ–ª—É—á–∞–µ–º —è–∑—ã–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                const userLang = Telegram.WebApp.initDataUnsafe.user?.language_code || 'ru';
                const savedLang = localStorage.getItem('wheel_lang') || (userLang === 'en' ? 'en' : 'ru');
                setLanguage(savedLang);
                
            } else {
                // –î–ª—è —Ç–µ—Å—Ç–∞ –±–µ–∑ Telegram
                const savedLang = localStorage.getItem('wheel_lang') || 'ru';
                setLanguage(savedLang);
            }
            
            // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–ø–∏–Ω–∞
            const savedSpinTime = localStorage.getItem('last_spin_time');
            if (savedSpinTime) {
                lastSpinTime = parseInt(savedSpinTime);
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –º–æ–∂–Ω–æ –ª–∏ –∫—Ä—É—Ç–∏—Ç—å
                if (lastSpinTime) {
                    const hoursPassed = (Date.now() - lastSpinTime) / (1000 * 60 * 60);
                    if (hoursPassed < 24) {
                        const hoursLeft = Math.ceil(24 - hoursPassed);
                        const t = translations[currentLang];
                        document.getElementById('cooldownInfo').textContent = 
                            t.cooldown.replace('{hours}', hoursLeft);
                        document.getElementById('cooldownInfo').style.display = 'block';
                        document.getElementById('spinBtn').disabled = true;
                    }
                }
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
            const container = document.querySelector('.container');
            const finalNote = document.createElement('div');
            finalNote.style.marginTop = '15px';
            finalNote.style.color = '#888';
            finalNote.style.fontSize = '14px';
            finalNote.style.fontStyle = 'italic';
            finalNote.id = 'finalNote';
            container.appendChild(finalNote);
            document.getElementById('finalNote').textContent = 
                currentLang === 'ru' ? '–£–¥–∞—á–∏! üçÄ' : 'Let\'s see what you get üçÄ';
        });
    </script>
</body>
</html>
